<!-- Partes que siempre aparecen en el navbar -->
<%- include('includes/sidenavsup.ejs') %>

<!-- Para que aparezca Mis Mentorados -->
<% for (i = 0; i < rolesA.length; i++) {  %>
  <% if (rolesA[i].idPrivilegio == 1) { %> 
  <%- include('includes/sideMentorados.ejs') %>
  <% } %>
<% } %>

<!-- Para que aparezca Empleados del chapter -->
<% for (i = 0; i < rolesA.length; i++) {  %>
  <% if (rolesA[i].idPrivilegio == 2) { %> 
  <%- include('includes/sideAgregarE.ejs') %>
  <% } %>
<% } %>

<!-- Final de la nav-->
<%- include('includes/sidenavFin.ejs') %>

<style>
  .container { 
  width: 70%;
}
</style>
<body>
  
  <div >
    <br>
    <h3 style="text-align:justify; font-size:x-large;"><a href="/empleados" style="text-decoration:none; color:rgb(72, 72, 206);"> Empleados del chapter</a><strong>
    </strong></h3>
    <hr class="style17">
  </div>

  <div class="container">
    <br><br>
    <div class="col-sm-12">
      <div class="card">
        <h5 class="card-header" style="font-size: larger;"><i class="bi bi-person-fill"></i> Datos de <%= empleado[0].nombre %> <%= empleado[0].apellidoP %> <%= empleado[0].apellidoM %></h5>
        <div class="card-body" >
          <!--Para tabla con boostrap-->
          <table class="table">
            <tbody>
              <form id = "modificarEmpleado" method="post"  enctype="multipart/form-data" >
              <tr>
                <!-- Foto de perfil-->
                <th scope="row">Foto de perfil: </th>
                <td> 
                
                  <div class="profile-pic-div">
                    <img src="/<%= empleado[0].fotoPerfil %>" id="photo">
                    <input type="file" id="file" name="fotoPerfil">
                    <label for="file" id="uploadBtn">Choose Photo</label>
                  </div>
    
                </td>
              </tr>                       

              <tr>
                <!-- Nombre -->
                <th scope="row">Nombre: </th>
                <td>
                  <input type="text" name="nombre" id="nombre" value="<%= empleado[0].nombre %>"  autocomplete="off" class="form-control"/>
                </td>
                
              </tr>

              <tr>
                <!-- Apellido Paterno -->
                <th scope="row">Apellido Paterno: </th>
                <td>
                  <input type="text" name="apellidoP" id="apellidoP" value="<%= empleado[0].apellidoP %>"  autocomplete="off" class="form-control"/></td>
                </td>
              </tr>

              <tr>
                <!-- Apellido Materno -->
                <th scope="row">Apellido Materno: </th>
                <td>
                  <input type="text" name="apellidoM" id="apellidoM" value="<%= empleado[0].apellidoM %>"  autocomplete="off" class="form-control"/></td>
                </td>
              
              </tr>

              <!-- Correo-->
              <tr>
                <th scope="row">Correo: </th>
                <td>
                  <input type="email" name="correo" id="correo" value="<%= empleado[0].correo %>"  autocomplete="off" class="form-control"/></td>
                </td>
              </tr>

              <!-- Contrase침a -->
              <tr>
                <th scope="row">Contrase침a: </th>
                <td>
                  <input type="password" name="contrasena" id="contrasena"  autocomplete="off" class="form-control"/></td>
                </td>
                
              </tr>

              <!-- Rol-->
              <% for (let rol of roles) { %>
                <tr>
                  <% if ( rol.idRol==empleado[0].idRol) { %>
                    <th scope="row">Rol: </th>
                    <td>
                      <select class="form-select" id="rol" name="rol" aria-label="Floating label select example" required>
                        <option value = "<%= rol.idRol %>"  selected>
                          <%= rol.descripcion %>
                        </option>
                        <% for (let rolOpcion of roles) { %>
                          <option value="<%= rolOpcion.idRol %>">
                            <%= rolOpcion.descripcion %>
                          </option>
                          <% } %>
                      </select>
                      
                    </td>
                    <% } %>
                </tr>
                <% } %>

                  <!-- Equipo -->
                  <% for (let equipo of equipos) { %>
                    <tr>
                      <% if ( equipo.idEquipo==empleado[0].idEquipo) { %>
                        <th scope="row">Equipo: </th>
                        <td>
                          <select class="form-select" id="equipo" name="equipo" aria-label="Floating label select example" required>
                            <option value = "<%= equipo.idEquipo %>" selected>
                              <%= equipo.nombre %>
                            </option>
                            <% for (let equipoOpcion of equipos) { %>
                              <option value="<%= equipoOpcion.idEquipo %>">
                                <%= equipoOpcion.nombre %>
                              </option>
                              <% } %>
                          </select>
                          
                        </td>
                        <% } %>
                    </tr>
                    <% } %>


                      <% for (let datosE of empleado) { %>
                        <tr>
                          <!--Para craft-->
                          <% if ( datosE.idDimension==1) { %>
                            <th scope="row">Nivel Craft: </th>
                            <td>
                                                  
                                <select class="form-select" id="nivelCraft" name="nivelCraft"
                                    aria-label="Floating label select example"required>
                                    <option selected><%= datosE.nivelE.toFixed(1) %></option>
                                      <option value="1.1">1.1</option>
                                      <option value="1.2">1.2</option>
                                      <option value="1.3">1.3</option>
                                      <option value="2.1">2.1</option>
                                      <option value="2.2">2.2</option>
                                      <option value="2.3">2.3</option>
                                      <option value="3.1">3.1</option>
                                      <option value="3.2">3.2</option>
                                      <option value="3.3">3.3</option>
                                      <option value="4.1">4.1</option>
                                      <option value="4.2">4.2</option>
                                      <option value="4.3">4.3</option>
                                      <option value="5.1">5.1</option>
                                      <option value="5.2">5.2</option>
                                      <option value="5.3">5.3</option>
                                </select>
                          
                            </td>
                           
                            <% } %>
                        </tr>
                        <tr>
                          <!--Para people-->
                          <% if ( datosE.idDimension==2) { %>
                            <th scope="row">Nivel People: </th>
                            <td>
                              <select class="form-select" id="nivelPeople" name="nivelPeople"
                                    aria-label="Floating label select example"required>
                                    <option selected><%= datosE.nivelE.toFixed(1) %></option>
                                      <option value="1.1">1.1</option>
                                      <option value="1.2">1.2</option>
                                      <option value="1.3">1.3</option>
                                      <option value="2.1">2.1</option>
                                      <option value="2.2">2.2</option>
                                      <option value="2.3">2.3</option>
                                      <option value="3.1">3.1</option>
                                      <option value="3.2">3.2</option>
                                      <option value="3.3">3.3</option>
                                      <option value="4.1">4.1</option>
                                      <option value="4.2">4.2</option>
                                      <option value="4.3">4.3</option>
                                      <option value="5.1">5.1</option>
                                      <option value="5.2">5.2</option>
                                      <option value="5.3">5.3</option>
                                </select>
                            </td>
                           
                            <% } %>
                        </tr>
                        <tr>
                          <!--Para business-->
                          <% if ( datosE.idDimension==3) { %>
                            <th scope="row">Nivel Business: </th>
                            <td>
                              <select class="form-select" id="nivelBbusiness" name="nivelBusiness"
                              aria-label="Floating label select example"required>
                              <option selected><%= datosE.nivelE.toFixed(1) %></option>
                                <option value="1.1">1.1</option>
                                <option value="1.2">1.2</option>
                                <option value="1.3">1.3</option>
                                <option value="2.1">2.1</option>
                                <option value="2.2">2.2</option>
                                <option value="2.3">2.3</option>
                                <option value="3.1">3.1</option>
                                <option value="3.2">3.2</option>
                                <option value="3.3">3.3</option>
                                <option value="4.1">4.1</option>
                                <option value="4.2">4.2</option>
                                <option value="4.3">4.3</option>
                                <option value="5.1">5.1</option>
                                <option value="5.2">5.2</option>
                                <option value="5.3">5.3</option>
                          </select>
                            </td>
                            <% } %>
                        </tr>
                        <%} %>

                    



            </tbody>
          </table>

          <a href="/empleados"  class="btn btn-secondary">Atr치s</a>
          <div class="position-relative">
          <input type="submit" value="Guardar cambios" class="btn btn-dark position-absolute bottom-0 end-0"/>
        </div>
        </form>
         
           
          

        </div>
      </div>
    </div>
  </div>


</body>

<script>
  //Declaro componentes de html

const imgDiv = document.querySelector('.profile-pic-div');
const img = document.querySelector('#photo');
const file = document.querySelector('#file');
const uploadBtn = document.querySelector('#uploadBtn');

//Hover de user

imgDiv.addEventListener('mouseenter', function(){
    uploadBtn.style.display = "block";
});

//Hover out

imgDiv.addEventListener('mouseleave', function(){
    uploadBtn.style.display = "none";
});


//Cuando cambiamos la imagen

file.addEventListener('change', function(){
    //El nuevo file de imagen
    const choosedFile = this.files[0];

    if (choosedFile) {

        const reader = new FileReader(); //FileReader es una funci칩n predifinida de JS

        reader.addEventListener('load', function(){
            img.setAttribute('src', reader.result);
        });

        reader.readAsDataURL(choosedFile);

    }
});
</script>

<%- include('includes/foot.ejs') %>